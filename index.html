<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>GrapesJS Demo</title>
    <link
      href="https://unpkg.com/grapesjs/dist/css/grapes.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/grapesjs"></script>

    <!-- Uncomment below script tag to integrate Preset Webpage Builder Style & Script -->
    <!-- <script src="/public/js/lib/grapesjs-preset-webpage.min.js"></script>
    <link
      rel="stylesheet"
      href="/public/css/lib/grapesjs-preset-webpage.min.css"
    /> -->

    <!-- Uncomment below script tag to integrate Preset Basic Blocks Builder Script -->
    <!-- <script src="/public/js/lib/grapesjs-blocks-basic.js"></script> -->

    <!-- Script tag to integrate Plugin Bootstrap4 Blocks Builder Script -->
    <script src="/public/js/lib/grapesjs-blocks-bootstrap4.min.js"></script>

    <!-- Script tag to integrate Plugin Navbar Block Script -->
    <script src="/public/js/lib/grapesjs-navbar.js"></script>
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="gjs" style="height: 0px; overflow: hidden">
      <style>
        body {
          background-color: #f4ebf3;
        }
        header {
          margin-top: 4rem;
        }
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .h1,
        .h2,
        .h3,
        .h4,
        .h5,
        .h6 {
          color: #9f5497;
        }
        .jumbotron {
          background-color: #d0bace;
        }
      </style>
      <!--<div style="margin:100px 100px 25px; padding:25px; font:caption">
      This is a demo content from index.html. For the development, you shouldn't edit this file, instead you can
      copy and rename it to _index.html, on next server start the new file will be served, and it will be ignored by git.
    </div>-->
      <div class="container">
        <div class="row">
          <div class="col-md-8 offset-md-2">
            <header class="header clearfix">
              <h1>GrapesJS Bootstrap v4 Blocks Plugin</h1>
            </header>
            <main role="main">
              <div class="jumbotron">
                <h1 class="display-4">Hello!</h1>
                <p class="lead">
                  This is demo content from <code>index.html</code>. For
                  development, you shouldn't edit this file. Instead, you can
                  copy and rename it to <code>_index.html</code>. The next time
                  the server starts, the new file will be served, and it will be
                  ignored by git.
                </p>
              </div>
            </main>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1">
            <div>Col</div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  data-toggle="tab"
                  href="#home"
                  role="tab"
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#profile" role="tab"
                  >Profile</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  data-toggle="tab"
                  href="#messages"
                  role="tab"
                  >Messages</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  data-toggle="tab"
                  href="#settings"
                  role="tab"
                  >Settings</a
                >
              </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
              <div class="tab-pane active" id="home" role="tabpanel">Home</div>
              <div class="tab-pane" id="profile" role="tabpanel">Profile</div>
              <div class="tab-pane" id="messages" role="tabpanel">Messages</div>
              <div class="tab-pane" id="settings" role="tabpanel">Settings</div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="embed-responsive embed-responsive-16by9">
              <iframe
                allowfullscreen="allowfullscreen"
                src="https://www.youtube.com/embed/aqz-KE-bpKQ?"
                class="embed-responsive-item"
              ></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var editor = grapesjs.init({
        height: "100%",
        showOffsets: 1,
        noticeOnUnload: 0,
        storageManager: {},
        container: "#gjs",
        fromElement: true,
        showDevices: false,
        plugins: [
          // "gjs-preset-webpage",
          // "grapesjs-blocks-basic",
          "grapesjs-blocks-bootstrap4",
          "gjs-navbar",
        ],
        pluginsOpts: {
          // "gjs-preset-webpage": {},
          // "gjs-blocks-basic": {},
          "grapesjs-blocks-bootstrap4": {
            blocks: {},
            blockCategories: {},
            labels: {},
            gridDevices: true,
            gridDevicesPanel: true,
            formPredefinedActions: [
              { name: "Contact", value: "/contact" },
              { name: "landing", value: "/landing" },
            ],
          },
          "gjs-navbar": {
            labelNavbarCategory: "Basic",
          },
        },
        canvas: {
          styles: [
            "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css",
          ],
          scripts: [
            "https://code.jquery.com/jquery-3.3.1.slim.min.js",
            "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js",
            "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js",
          ],
        },
      });
      window.editor = editor;

      const cmdClear = "canvas-clear";
      const cmdUndo = "undo";
      const cmdRedo = "redo";

      // Start: Add new Devices buttons
      const pn = editor.Panels;
      const panelDevices = pn.addPanel({ id: "options" });
      panelDevices.get("buttons").add([
        {
          id: cmdUndo,
          className: "fa fa-undo",
          command: (e) => e.runCommand(cmdUndo),
        },
        {
          id: cmdRedo,
          className: "fa fa-repeat",
          command: (e) => e.runCommand(cmdRedo),
        },
        {
          id: cmdClear,
          className: "fa fa-trash",
          command: (e) => e.runCommand(cmdClear),
        },
      ]);
      // End: Add new Devices buttons

      // Start: Add new custom responsive device button
      const dm = editor.DeviceManager;
      dm.add("Extra Extra Small", "375px");

      const panelResponsiveDevices = pn.addPanel({ id: "devices-buttons" });
      panelResponsiveDevices.get("buttons").add([
        {
          id: "deviceXxs",
          command: "set-device-xxs",
          className: "fa fa-mobile",
          attributes: { title: "Extra Extra Small" },
        },
      ]);
      // End: Add new custom responsive device button

      // Start: Add Define new commands
      const cm = editor.Commands;
      cm.add(
        cmdClear,
        (e) =>
          confirm("Are you sure to clear canvas?") &&
          e.runCommand("core:canvas-clear")
      );
      cm.add(
        cmdUndo,
        (e) => confirm("Are you sure to undo?") && e.runCommand("core:undo")
      );
      cm.add(
        cmdRedo,
        (e) => confirm("Are you sure to redo?") && e.runCommand("core:redo")
      );

      cm.add("set-device-xl", (e) => e.setDevice("Desktop"));
      cm.add("set-device-xxs", (e) => e.setDevice("Extra Extra Small"));
      // End: Add Define new commands

      // Start: Define a new custom blocks
      const bm = editor.BlockManager;
      bm.add("test-block", {
        label: `<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg>
        <div>Test Block</div>`,
        category: "Extra",
        attributes: { class: "fa fa-text" },
        content: {
          type: "test-comp",
          content: `TEST COMPONENT BLOCK`,
        },
      });

      bm.add("quote", {
        label: "Quote",
        category: "Basic",
        attributes: { class: "fa fa-quote-right" },
        content: `<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
        </blockquote>`,
      });

      bm.add("text-basic", {
        category: "Basic",
        label: "Text section",
        attributes: { class: "gjs-fonts gjs-f-h1p" },
        content: `<section class="bdg-sect">
      <h1 class="heading">Insert title here</h1>
      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
      </section>`,
      });
      // End: Define a new custom blocks

      // Use the Style Manager API/Methods
      const sm = editor.StyleManager; // Get StyleManeger module instance

      // Add new Style Manager property to Sector 'Decorations'
      const property = sm.addProperty(
        "decorations",
        {
          label: "Opacity",
          property: "opacity",
          type: "slider",
          default: "1",
          min: "0",
          max: "1",
          step: "0.1",
        },
        { at: 0 }
      );

      // Remove Style Manager property from Sector 'Extra'
      sm.removeProperty("extra", "opacity");
    </script>
  </body>
</html>
